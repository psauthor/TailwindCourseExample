{"version":3,"file":"main.js","sources":["../../src/api.js","../../src/results.js","../../src/menu.js","../../src/main.js"],"sourcesContent":["const baseUrl = \"https://bechdel.azurewebsites.net/api/\";\r\n\r\nasync function getAll(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/${year}/?page=${page}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/?page=${page}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getPassed(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/passed/${year}/?page=${page}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/passed/?page=${page}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getFailed(page, year) {\r\n  let response;\r\n  if (year) {\r\n    response = await fetch(getUrl(`films/failed/${year}/?page=${page}`));\r\n  } else {\r\n    response = await fetch(getUrl(`films/failed/?page=${page}`));\r\n  }\r\n  return await response.json();\r\n};\r\n\r\nasync function getYears(page, year) {\r\n  const response = await fetch(getUrl(`years`));\r\n  return await response.json();\r\n};\r\n\r\nfunction getUrl(path) {\r\n  if (path[0] === \"/\") throw error(\"Path must start without the /\");\r\n  return `${baseUrl}${path}`;\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  getPassed,\r\n  getFailed,\r\n  getYears\r\n}\r\n","import api from \"./api.js\";\r\n\r\nconst resultsPane = document.getElementById(\"results\");\r\nconst yearSelect = document.getElementById(\"year-select\");\r\n\r\nconst Categories = {\r\n  None: Symbol(\"NONE\"),\r\n  All: Symbol(\"ALL\"),\r\n  Passed: Symbol(\"PASSED\"),\r\n  Failed: Symbol(\"FAILED\"),\r\n};\r\n\r\nconst status = {\r\n  category: Categories.None,\r\n  page: 1,\r\n  pages: 0,\r\n  total: 0,\r\n  currentYear: null\r\n};\r\n\r\nyearSelect.addEventListener(\"change\", async (e) => {\r\n  status.currentYear = e.target.value == \"null\" ? null : Number(e.target.value);\r\n  console.log(e);\r\n  await getResults(status.category);\r\n});\r\n\r\nfunction renderFilms(response) {\r\n  resultsPane.innerHTML = \"\";\r\n  const filmDivs = [];\r\n  for (let film of response.results) {\r\n    filmDivs.push(formatFilm(film));\r\n  }\r\n  resultsPane.innerHTML = filmDivs.join(\"\");\r\n}\r\n\r\nasync function fillSelect() {\r\n\r\n  // Fill the year dropdown on first call (Always All and all years)\r\n  if (yearSelect.options.length === 0) {\r\n    const years = await api.getYears();\r\n    for (year of [\"All Years\", ...years]) {\r\n      yearSelect.add(new Option(year, year == \"All Years\" ? null : Number(year)));\r\n    }\r\n  }\r\n}\r\n\r\nasync function getResults(category) {\r\n  await fillSelect();\r\n  let response;\r\n  if (category === Categories.All) {\r\n    response = await api.getAll(status.page, status.currentYear );\r\n  } else if (category === Categories.Failed) {\r\n    response = await api.getFailed(status.page, status.currentYear);\r\n  } else if (category === Categories.Passed) {\r\n    response = await api.getPassed(status.page, status.currentYear);\r\n  } else {\r\n    console.error(\"Bad Category Used...\");\r\n  }\r\n\r\n  if (status.category != category) {\r\n    status.category = category;\r\n    status.page = 1;\r\n    status.pageCount = response.pageCount;\r\n    status.count = response.count;\r\n  }\r\n\r\n  renderFilms(response);\r\n}\r\n\r\nfunction formatFilm(film) {\r\n  return `<div class=\"film\">\r\n    <img src=\"${film.posterUrl}\" alt=\"${film.title}\" />\r\n    <div class=\"title\">${film.title}</div>\r\n    <div class=\"info\">${film.year}</div>\r\n    <div class=\"info\">${film.rating}</div>\r\n    <div class=\"info\">Passed: ${film.passed}</div>\r\n    <div class=\"info\">Reason: ${film.reason}</div>\r\n    <div class=\"info\">Budget: $${film.budget.toLocaleString(\"en-US\")}</div>\r\n    <div class=\"info\">Domestic Gross: $${film.domesticGross.toLocaleString(\r\n      \"en-US\"\r\n    )}</div>\r\n    <div class=\"info\">International Gross: $${film.internationalGross.toLocaleString(\r\n      \"en-US\"\r\n    )}</div>\r\n    <p>${film.overview}</p>\r\n  </div>`;\r\n}\r\n\r\nexport const loadAll = async () => await getResults(Categories.All);\r\nexport const loadPassed = async () => await getResults(Categories.Passed);\r\nexport const loadFailed = async () => await getResults(Categories.Failed);\r\n","import { loadAll, loadFailed, loadPassed } from \"./results\";\r\n\r\nexport default function () {\r\n\r\n  const allMenu = document.getElementById(\"menu-all\");\r\n  const passMenu = document.getElementById(\"menu-pass\");\r\n  const failMenu = document.getElementById(\"menu-fail\");\r\n\r\n  allMenu.addEventListener(\"click\", () => loadAll());\r\n  passMenu.addEventListener(\"click\", () => loadPassed());\r\n  failMenu.addEventListener(\"click\", () => loadFailed());\r\n\r\n}","import { loadAll } from \"./results.js\";\r\nimport menu from \"./menu\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async (e) => {\r\n  menu();\r\n  await loadAll();\r\n});\r\n"],"names":[],"mappings":"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"}